# 游戏测试清单

## 测试环境
- 浏览器: Chrome/Firefox/Safari/Edge (90+)
- 本地服务器: `python3 -m http.server 8000`
- 访问地址: http://localhost:8000

## 11.2 调试核心功能测试清单

### ✅ 测试1: 角色选择流程

#### 测试步骤:
1. 打开游戏，应该看到角色选择界面
2. 点击第一个角色（warrior）- 应该显示绿色边框和"P1"标签
3. 点击第二个角色（mage）- 应该显示蓝色边框和"P2"标签
4. 再次点击warrior - P1选择应该被取消
5. 再次点击warrior - P1选择应该恢复
6. 按空格键 - 游戏应该开始，进入战斗界面

#### 预期结果:
- ✓ 角色选择界面正确显示所有角色头像
- ✓ 点击角色时正确显示选择高亮
- ✓ 可以取消和重新选择角色
- ✓ 双方选择完成后按空格键可以开始游戏
- ✓ 显示"选择你的角色"标题
- ✓ 显示"双方选择完成后按空格键开始游戏"提示

### ✅ 测试2: 战斗流程 - 移动

#### 测试步骤:
1. 进入战斗后，按A键 - Player 1应该向左移动
2. 按S键 - Player 1应该向右移动
3. 按K键 - Player 2应该向左移动
4. 按L键 - Player 2应该向右移动
5. 持续按A键直到角色到达左边界 - 角色应该停在边界处
6. 持续按L键直到角色到达右边界 - 角色应该停在边界处

#### 预期结果:
- ✓ Player 1在左侧，Player 2在右侧
- ✓ 移动控制响应正确
- ✓ 角色不会移出Canvas边界
- ✓ 移动时播放normal状态动画

### ✅ 测试3: 战斗流程 - 攻击

#### 测试步骤:
1. 按D键 - Player 1应该执行攻击动画
2. 等待攻击动画完成 - 角色应该返回normal状态
3. 按J键 - Player 2应该执行攻击动画
4. 等待攻击动画完成 - 角色应该返回normal状态

#### 预期结果:
- ✓ 攻击动画正确播放
- ✓ 攻击动画完成后自动返回normal状态
- ✓ 攻击期间显示attacking状态的动画帧

### ✅ 测试4: 战斗流程 - 碰撞和伤害

#### 测试步骤:
1. 移动Player 1靠近Player 2
2. 按D键让Player 1攻击
3. 观察是否命中Player 2

#### 预期结果:
- ✓ 当攻击框与受击框重叠时，命中成功
- ✓ 被击中的角色血量减少
- ✓ 被击中的角色切换到attacked状态
- ✓ 双方角色被击退（推开一定距离）
- ✓ 击退期间双方无法移动或攻击
- ✓ 击退完成后双方返回normal状态
- ✓ 血条正确显示当前血量
- ✓ 血条颜色根据血量变化（绿色>黄色>红色）

### ✅ 测试5: 复活机制

#### 测试步骤:
1. 持续攻击一个角色直到血量归零
2. 观察角色进入knocked状态
3. 等待约2秒
4. 观察角色复活

#### 预期结果:
- ✓ 血量归零时角色进入knocked状态
- ✓ knocked状态播放倒地动画
- ✓ 第一次倒地后，等待2秒自动复活
- ✓ 复活后血量恢复到最大值
- ✓ 复活后返回normal状态
- ✓ knockdownCount增加到1

### ✅ 测试6: 游戏结束

#### 测试步骤:
1. 让一个角色第二次血量归零
2. 观察游戏是否进入胜利界面

#### 预期结果:
- ✓ 第二次血量归零时游戏结束
- ✓ 显示胜利界面覆盖层
- ✓ 显示"胜利!"文字
- ✓ 显示获胜角色名称
- ✓ 显示"按空格键返回角色选择"提示
- ✓ 失败的角色保持knocked状态

### ✅ 测试7: 游戏重置

#### 测试步骤:
1. 在胜利界面按空格键
2. 观察是否返回角色选择界面

#### 预期结果:
- ✓ 返回角色选择界面
- ✓ 所有角色选择被清空
- ✓ 可以重新选择角色开始新游戏
- ✓ 新游戏中角色血量和knockdownCount都已重置

### ✅ 测试8: 特殊技能（组合技）

#### 测试步骤:
1. 对于warrior: 快速按A-S-D（后退-前进-攻击）
2. 对于mage: 快速按S-S-D（前进-前进-攻击）
3. 对于ninja: 快速按A-A-D（后退-后退-攻击）

#### 预期结果:
- ✓ 在0.5秒内完成按键序列时触发特殊技能
- ✓ 特殊技能播放不同的动画
- ✓ 特殊技能造成更高的伤害
- ✓ 特殊技能有更大的攻击范围

## 测试结果记录

### 通过的测试:
- [ ] 测试1: 角色选择流程
- [ ] 测试2: 战斗流程 - 移动
- [ ] 测试3: 战斗流程 - 攻击
- [ ] 测试4: 战斗流程 - 碰撞和伤害
- [ ] 测试5: 复活机制
- [ ] 测试6: 游戏结束
- [ ] 测试7: 游戏重置
- [ ] 测试8: 特殊技能

### 发现的问题:
（在此记录测试中发现的任何问题）

### 需要修复的bug:
（在此记录需要修复的bug列表）

## 控制说明

### Player 1 (左侧):
- A: 向左移动
- S: 向右移动
- D: 攻击
- 组合技: 根据角色不同

### Player 2 (右侧):
- K: 向左移动
- L: 向右移动
- J: 攻击
- 组合技: 根据角色不同

### 全局:
- 空格: 开始游戏 / 重新开始
